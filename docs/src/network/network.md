# NerWork

## OSI网络模型分层

1. 应用层
2. 表示层
3. 会话层
4. 传输层
5. 网络层
6. 数据链路层
7. 物理层

## 数据的封装
1. 数据的封装是一个自上而下的过程【从应用层到物理层的过程】
2. 数据在上3层保持不变，统一的名称为PDU【Protocol Data Unit | 协议数据单元】
3. 数据在第四层传输层添加TCP/UDP头部，称为数据段【Segment】
4. 数据在第三层网络层添加IP头部，称为数据包【Packet】
5. 数据在第二层数据链路层添加MAC头部和FCS尾部，称为数据帧【Frame】
6. 输在到达物理层，物理层将其称为bit流，通过有线或无线的方式传输

## 表示层

1. 提供了数据的加密

```text
加秘方法：
1.对称加密
2.非对称加密
3.hash加密
```

## 会话层

1. 在两个应用程序之间负责建立、维护、拆除会话

## 传输层

1. 提供了端口号码

## 网络层

作用：

1. 定义了IP地址（Internet Protocol | 互联网协议）、逻辑地址
2. 根据运行的不同动态路由协，议选择不同的最佳路径
3. 连接不同的媒介类型（内外网）
4. 在选择好的最佳路径上负责传输和转发数据报文

```text
在IPv4单播网络中环境中，存在6大单播动态路由协议
1、RIP 【Routing Information Protocol | 路由信息协议】
2、OSPF 【Open Shortest Path First | 开放最短路径优先】
3、IGPR 【内部网卡路由协议】 Cisco私有
4、EIGPR 【增强型内部网卡路由协议】 Cisco私有
5、IS-IS 【Intermediate System to Intermediate System | 中间系统到中间系统】
6、BGP 【Border Gateway Protocol | 边界网关协议】
// 7、SP 【Segment Routing | 分段路由】
```

```text
IP:

IP地址的作用：
1、用来唯一标识一个网络节点
2、用来标识一个网段


APR【地址解析协议】
作用：一直对端的IP地址，用力请求解析对端的MAC地址时使用的

RAPR【反向地址解析协议】
作用：向服务器请求获取自身所需要的IP地址

```

```text
路由
路由器的概念：跨越从源主机到目标主机的一个互联网络来转发数据包的过程
路由器：负责路由数据包的设备

路由器理由数据包的过程：
1、在不使用NAT的前提下，路由器路由数据包时，三层的源IP与目标IP地址始终保持不变
2、路由器会不断的使用自身接口的MAC地址做二成重写，直至将数据报文路由至目的节点
3、路由器每一个接口都有一个独立的MAC地址


```
### ACL 【访问控制列表】

#### ACL的基本概念
1. ACL是作用于设备接口级的指令，用来判断哪些报文可以被转发，哪些报文需要被过滤
2. ACL会读取第2【MAC地址】、3【IP地址】、4【端口地址】层的头部消息
3. ACL将根据管理员预先创建好的规则来匹配过滤每一个报文

## 数据链路层

作用：

1. 定义了数据在传输过程中必须要使用的一个地址：MAC地址（Media Access Contral | 介质访问控制）
    1. MAC （网卡地址、物理地址）
2. 负责数据链路的建立、维护和拆除
3. 提供了数据帧的封装、传输和同步
4. 提供了差错检测的功能
5. 流量控制

```text
以太网：使用以太链路连接而成的一张拓扑结构网络
以太：Ethernet

E0/0/0----Ethernet 0/0/0 【以太网】 10M
F0/0/0----FastEthernet 0/0/0 【快速以太网】 100M
G0/0/0----GigbitEthernet 0/0/0 【吉比特以太网】 1000M

注： 上述为Cisco设备的接口，华为没有F口，E口为100M




MAC地址长度共48bit【6byte】
MAC地址前24bit为厂商标识，后24bit为地址的唯一标识
MAC地址的第8为若为0表示单播地址，为1表示组播地址

IPv4中，有3中传输的过程：
1、单播
2、广播
3、组播

在IPv6中取消的广播的概念，取而代之的是任意播

以太帧格式：Ethernet II 和 IEEE 802.3

以太网交换机：
1、盒式交换机
2、框式交换机

冲突与冲突域
1、为了防止冲突的发生，提高传输的效率，应采取的做法是分割冲突域
2、交换机的每一个端口就是一个独立的冲突域

LLDP【Link Layer Discover Protocol | 链路层发现协议】
用来发现直连的邻居信息
[HUAWEI] lldp enable
[HUAWEI] display lldp neighbor [brief | interface E0/0/10]

[HUAWEI] save  //保存配置信息
[HUAWEI] reset saved-configuration  //重置配置信息

为配置明文密钥
[HUAWEI] user-interface console 0
[HUAWEI] authentication-mode password
[HUAWEI] set authentication password simple mima 


为配置密文密钥
[HUAWEI] user-interface console 0
[HUAWEI] authentication-mode password
[HUAWEI] set authentication password cipher mima 

VLAN
VLAN的作用：(隔离广播域,有效的阻止广播风暴)
1、广播控制
2、安全性
3、带宽利用
4、延迟

VLAN的种类：
1、基于端口的静态划分
2、基于MAC地址的动态划分
3、基于IP子网的动态划分
4、基于协议的动态划分
优先级： MAC地址 -》 IP子网 -》 协议 -》 端口

链路类型：
1、接入链路【access】：用于客户端与交换机之间，传递的的不带VLAN标签的原始数据帧
2、中继链路【trunk】：用于交换机与交换机之间，传递的是带有VLAN标签的数据帧
3、混杂链路【hybrid】 不同的VLAN主机相互通信

交换机封装VLAN的方式：
1、IEEE 802.1Q 【业界公有标准】
破坏原始二成封装，在原始的二成封装中插入一个4byte大小的标记【在SMAC（源MAC地址）与Type之间】
4byte的Tag标记有两部分：
1、TPID 【Tag Protocol Identifier】：0*8100 是IEEE的新类型，表明这是一个携带802.1Q标签的帧，占2byte
2、TCI 【Tag Control Information】：
    Pri 【Priority】3bit，表示帧的优先级
    CFI  1bit 判断是否是经典格式，0经典 1非经典
    VLAN ID 12bit 取值范围1-4094


STP【Spanning Tree Protocol | 生成树协议】(在二层防环)
STP作用：
1、逻辑上断开环路，防止广播风暴的产生（防环）
2、当主链路出现故障时，断开的端口将被激活，恢复通信，起到备份线路的作用

STP算法：
1、选择根网桥【Root Bridge】
    1、每台交换机都拥有一个自身唯一的BID【Bridge ID】
    2、BID = 网桥优先级 + 网桥的MAC地址
    3、BID越小越优先
    4、取值范围：0-61440 【默认值32768  注：需要4096的倍数】
2、选择根端口【Root Port】(到达根网桥的端口叫根端口)
    1、最低的到达根网桥的路径开销
        1、 10M 成本 100
        2、 100M 成本 19
        3、 1000M 成本 4
        4、 10000M 成本 2
    2、最低的发送方（根网桥）网桥ID
    3、最低的端口优先级
    4、发送方最低的端口ID
3、选择指定端口
   1、根网桥身上的所有端口都是指定端口
   2、在非根网桥上指定端口分为4步
        1、BPDU中的根网桥ID
        2、最低的到达根网桥的路径开销
        4、发送方的网桥ID,若优先级相同，则具有最低MAC地址



交换机生成树的5种状态：
1、禁用
2、阻塞
3、侦听
4、学习
5、转发

```





## 物理层

作用：保证数据的双向传输

物理层实现的统一：

1. 电子/光学：描述信号的各种特性
    - 模数转换
        1. 分段
        2. 取样
        3. 编码
        4. 量化
2. 机械性：描述了连接器的尺寸、规格，包括于导线的金属成分
3. 功能性： 描述了做了什么
4. 程序性： 描述了如何做

```text
数字信号的缺点：
1. 传输数字信号相比传输模拟信号所要求的频带宽很多，也就意味着其信道的利用率低

频带 -》 带宽，信号所占据的频带宽度

物理层的传输介质：
有线介质：
1. 双绞线
    非屏蔽双胶线【UTP】
    屏蔽双绞线【STP】
    
    T568B T568A
    接收（橙白 橙） 发送（绿白 绿）
    
    双绞线传输距离最大100m
2. 光纤




```
