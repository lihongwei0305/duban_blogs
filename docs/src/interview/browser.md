## 浏览器有哪些进程

- 浏览器进程
    - 主进程,负责管理整个浏览器的工作流程
- 渲染进程(每个标签页都有一个渲染进程.用于解析和渲染网页内容)
    - 主线层:渲染线层
    - 网络线层
    - 布局线层
    - 绘制线层
    - 合成线层
    - 垃圾回收线层
    - 定时器线层
    - 事件处理线层
- GPU进程
- 网络进程
- 扩展进程
- 插件进程

## DOM树是怎么生成的

构建DOM树 -> 分析样式表 -> 构建render树 -> 布局 -> 绘制

1. 解析HTML/XML生成DOM树
2. 解析css生成样式表
3. 将DOM树和样式表关联起来,构建render树
4. 基于render树布局,根据树节点的描述放到对应的位置
    - 节点: 元素节点、属性节点、注释节点
5. 绘制到屏幕上

## 浏览器在一帧会干那些事

1. 接受输入事件
2. 执行事件回调
3. 开始一帧
4. 执行RequestAnimationFrame
5. 页面布局,计算样式
6. 绘制渲染
7. 执行RequestIdelCallback

## 重汇和回流

重绘（Repaint）和回流（Reflow）是浏览器渲染页面时的两个关键过程。

重绘是指当元素样式发生改变，但不影响其布局的情况下，浏览器会重新绘制（重绘）这个元素，将新的样式应用到元素上。重绘不会引起元素的位置或尺寸的变化，只会改变元素的外观。

回流是指当页面布局（大小、位置）发生改变时，浏览器需要重新计算并更新元素的布局信息，然后重新绘制页面。回流会导致元素的位置、尺寸等属性发生变化，可能涉及到其他元素的位置和尺寸的调整。

回流的代价比重绘更高，因为回流涉及到重新计算布局信息和重新绘制页面，而重绘只需要重新绘制元素的外观。因此，频繁的回流操作会影响页面性能，特别是在大型复杂的页面上。

常见触发回流的操作包括：

修改页面的结构（添加、删除、修改元素）
修改元素的布局属性（尺寸、位置、边距等）
获取某些属性值（如 offsetTop、offsetLeft、offsetWidth、offsetHeight、scrollTop、scrollLeft 等）
为了减少回流的次数，可以采取以下优化策略：

使用 CSS3 的 transform 属性代替修改元素的位置属性（如 top、left）
批量修改元素样式，或者使用 CSS 类名的方式进行一次性的样式变更
避免频繁获取需要触发回流的属性值，尽量将需要获取的属性值缓存起来
使用文档片段（DocumentFragment）进行多个 DOM 操作，然后一次性将文档片段添加到页面中
通过减少回流的次数，可以提高页面的渲染性能，提升用户体验。